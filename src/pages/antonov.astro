---

---

<div class="mobile-wrapper">
  <div class="app-content">

    <header class="app-header">
      <h1>Generador de Versículos</h1>
      <div class="divider"></div>
      <p class="subtitle">Crea imágenes hermosas para compartir la Palabra</p>
    </header>

    <div class="canvas-area">
      <canvas id="versiculo-canvas" width="1080" height="1350"></canvas>
    </div>

    <div class="controls">
      <div class="field">
        <label>Versículo</label>
        <textarea id="versiculo-text" rows="4">
Porque de tal manera amó Dios al mundo...
        </textarea>
      </div>

      <div class="field">
        <label>Referencia Bíblica</label>
        <input type="text" id="cita-text" value="Juan 3:16" />
      </div>

      <div class="actions">
        <button id="actualizar-btn" class="btn-primary">✨ Actualizar</button>
        <button id="descargar-btn" class="btn-secondary">⬇️ Descargar</button>
      </div>
    </div>

  </div>
</div>

<style>
.mobile-wrapper {
  width: 100%;
  max-width: 420px;
  margin: 40px auto;
  background: white;
  border-radius: 24px;
  box-shadow: 0 20px 25px -5px rgba(0,0,0,.1);
  overflow: hidden;
}

.app-content {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.app-header {
  text-align: center;
}

.app-header h1 {
  font-family: 'Playfair Display', serif;
  font-size: 1.4rem;
  margin: 0;
}

.divider {
  width: 60px;
  height: 3px;
  background: linear-gradient(135deg, #D4AF37 0%, #E8D4A0 100%);
  margin: 10px auto;
  border-radius: 10px;
}

.subtitle {
  font-size: 0.75rem;
  color: #6b7280;
}

.canvas-area {
  width: 100%;
  aspect-ratio: 4/5;
  background: #f3f4f6;
  border-radius: 16px;
  overflow: hidden;
}

canvas {
  width: 100%;
  height: 100%;
}

.controls {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

textarea, input {
  padding: 12px;
  border-radius: 12px;
  border: 2px solid #e5e7eb;
  font-family: inherit;
}

.actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

button {
  padding: 14px;
  border-radius: 12px;
  font-weight: 700;
  border: none;
  cursor: pointer;
}

.btn-primary {
  background: linear-gradient(135deg, #D4AF37 0%, #8B7355 100%);
  color: white;
}

.btn-secondary {
  background: #111827;
  color: white;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const canvas = document.getElementById('versiculo-canvas');
  const ctx = canvas.getContext('2d');
  const versiculoInput = document.getElementById('versiculo-text');
  const citaInput = document.getElementById('cita-text');
  const actualizarBtn = document.getElementById('actualizar-btn');
  const descargarBtn = document.getElementById('descargar-btn');

  const backgroundImage = new Image();
  backgroundImage.crossOrigin = 'anonymous';
  backgroundImage.src = 'https://images.unsplash.com/photo-1470252649378-9c29740c9fa8?w=1080&h=1350&fit=crop&q=80';

  function wrapText(text, maxWidth, fontSize) {
    ctx.font = fontSize + "px Playfair Display";
    const words = text.split(' ');
    const lines = [];
    let current = '';

    words.forEach(word => {
      const test = current + (current ? ' ' : '') + word;
      if (ctx.measureText(test).width > maxWidth) {
        lines.push(current);
        current = word;
      } else {
        current = test;
      }
    });

    if (current) lines.push(current);
    return lines;
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "rgba(0,0,0,0.5)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    const text = versiculoInput.value;
    const maxWidth = canvas.width - 160;
    let fontSize = 64;
    let lines;

    do {
      lines = wrapText(text, maxWidth, fontSize);
      fontSize -= 2;
    } while (lines.length * fontSize * 1.4 > canvas.height - 400 && fontSize > 28);

    ctx.fillStyle = "#fff";
    ctx.font = fontSize + "px Playfair Display";
    ctx.textAlign = "center";

    let y = canvas.height / 2 - (lines.length * fontSize) / 2;

    lines.forEach(line => {
      ctx.fillText(line, canvas.width / 2, y);
      y += fontSize * 1.4;
    });

    ctx.fillStyle = "#D4AF37";
    ctx.font = "bold 48px Montserrat";
    ctx.fillText(citaInput.value, canvas.width / 2, canvas.height - 150);
  }

  backgroundImage.onload = draw;

  actualizarBtn.addEventListener('click', draw);

  descargarBtn.addEventListener('click', () => {
    const link = document.createElement('a');
    link.download = "versiculo.png";
    link.href = canvas.toDataURL();
    link.click();
  });

});
</script>
