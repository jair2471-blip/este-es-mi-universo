---
import { Image as AstroImage } from 'astro:assets';

const props = Astro.props;
const { src, alt, ...rest } = props;

if (!alt) {
  throw new Error("El atributo 'alt' es obligatorio.");
}
---

{
  /* Si Astro logró procesar la imagen (es un objeto), usamos AstroImage para optimizar */
  typeof src === 'object' ? (
    <AstroImage 
      src={src} 
      alt={alt} 
      width={rest.width || 800} 
      height={rest.height || 450} 
      {...rest} 
    />
  ) : (
    /* Si falló o es un link externo, usamos una etiqueta normal */
    <img src={src} alt={alt} {...rest} />
  )
}