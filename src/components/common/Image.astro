---
import { Image as AstroImage } from 'astro:assets';

const props = Astro.props;
const { src, alt, ...rest } = props;

// CAMBIO CLAVE: Si no hay alt, le asignamos uno por defecto para que no explote el build
const safeAlt = alt || "Imagen de Universo de la Mente"; 
---

{
  /* Si Astro logró procesar la imagen (es un objeto), usamos AstroImage para optimizar */
  typeof src === 'object' ? (
    <AstroImage 
      src={src} 
      alt={safeAlt} 
      width={rest.width || 800} 
      height={rest.height || 450} 
      {...rest} 
    />
  ) : (
    /* Si falló o es un link externo, usamos una etiqueta normal */
    <img src={src} alt={safeAlt} {...rest} />
  )
}